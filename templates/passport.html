<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <title>ğŸ’š å¯µç‰©æ•¸ä½è­·ç…§ ğŸ¾</title>
    <meta content="æ¯›å­©ç¤¾äº¤åœ°åœ–è¼”åŠ©é é¢" name="description">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">   
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        /* ğŸ¨ å…¨åŸŸ/è®Šæ•¸å®šç¾© - ç¶ è‰²å†·è‰²ç³»ä¸»é¡Œ (å¯µç‰©è­·ç…§é é¢) */
        :root {
            /* å“ç‰Œæ ¸å¿ƒè‰² (ç¶ è‰²ä¸»é¡Œ) */
            --bs-primary: #00C9A7; /* æ ¸å¿ƒè‰²ï¼šè–„è·ç¶ /é’è‰² */
            --bs-primary-rgb: 0, 201, 167;
            --bs-secondary: #2ecc71; /* æ¬¡è¦å®‰å…¨ç¶ è‰² */
            --bs-light-bg: #E8F8F5; /* æ·ºè–„è·ç¶ èƒŒæ™¯ */
            
            /* æ——å¹Ÿé…è‰² */
            --banner-main: var(--bs-primary); 
            --banner-sub-text-color: #0B5345; /* æ·±æ¾ç¶  */
            --text-light: #FFFFFF;

            /* è¼”åŠ©é¡è‰² */
            --border-green: #008779; /* æ——å¹Ÿä¸‹æ–¹çš„ç´°ç·šé¡è‰²è®Šæ·± */
            --button-border-green: #2ecc71; /* è¿”å›æŒ‰éˆ•é‚Šæ¡†ç”¨ç¿¡ç¿ ç¶  */
            --dark-footer: #004D40; /* æ·±æ¾ç¶ é å°¾ */
        }

        /* ğŸ–‹ï¸ å­—é«”è¨­å®š */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bs-light-bg); 
        }
        h1, h3, h5, .creative-title-container *, .sub-text-under-banner {
            font-family: 'Fredoka', sans-serif; 
            font-weight: 700;
        }

        /* ğŸï¸ é é¢æ¨™é ­å€å¡Š (Header) */
        .page-header { 
            background: linear-gradient(135deg, var(--bs-light-bg) 0%, #B9FBC0 100%); 
            padding: 50px 0; 
            margin-bottom: 30px; 
            border-bottom: none; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            min-height: 250px; 
            position: relative; 
            flex-direction: column; 
        }
        .page-header .container {
             display: flex;
             flex-direction: column; 
             align-items: center; 
             justify-content: center; 
             width: 100%; 
        }

        /* ================================================= */
        /* ğŸ† å‰µæ„æ¨™é¡Œæ¨£å¼ (æ——å¹Ÿ - ç¶ è‰²) */
        /* ================================================= */

        .creative-title-container {
            display: inline-block;
            text-align: center;
            position: relative;
            padding-bottom: 0; 
            margin-bottom: 5px; 
            z-index: 10; 
        }

        /* --- ä¸»æ¨™é¡Œæ——å¹Ÿ --- */
        .main-title-banner {
            background-color: var(--banner-main); /* è–„è·ç¶  */
            color: var(--text-light);
            padding: 20px 50px; 
            font-size: 3rem; 
            line-height: 1.2;
            position: relative;
            z-index: 2; 
            clip-path: polygon(0 0, 5% 50%, 0 100%, 100% 100%, 95% 50%, 100% 0);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.25); 
        }
        .main-title-banner i {
            font-size: 2.5rem; 
            vertical-align: middle; 
            margin-right: 15px;
        }
        /* æ——å¹Ÿä¸‹æ–¹çš„ç´°ç·š */
        .main-title-banner::after {
            content: '';
            position: absolute;
            bottom: -5px; 
            left: 5%; 
            right: 5%; 
            height: 5px;
            background-color: var(--border-green); /* ç¶ è‰²ç´°ç·š */
            z-index: 3;
            clip-path: polygon(0 0, 100% 0, 97% 100%, 3% 100%); 
        }

        /* --- å‰¯æ¨™é¡Œæ–‡å­—æ¨£å¼ (åœ¨æ——å¹Ÿä¸‹æ–¹) --- */
        .sub-text-under-banner {
            color: var(--banner-sub-text-color); /* æ·±æ¾ç¶  */
            font-size: 1.5rem;
            margin-top: 10px; 
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5); 
        }
        
        /* --- æŒ‰éˆ•ç¾¤çµ„ (åœ¨æ¨™é¡Œä¸‹æ–¹) --- */
        .button-group-under-title {
            margin-top: 25px; 
        }

        /* â¡ï¸ è¿”å›æŒ‰éˆ•æ¨£å¼ (ç¶ è‰²é‚Šæ¡†/ç™½è‰²èƒŒæ™¯) */
        .btn-outline-primary {
            color: var(--button-border-green);
            border-color: var(--button-border-green);
            background-color: white; 
            padding: 12px 25px;
            font-weight: 600;
            border-radius: 10px; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
            transition: all 0.3s ease;
        }
        .btn-outline-primary:hover {
            background-color: var(--button-border-green);
            color: white;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            transform: scale(1.03); 
        }
        /* ç·¨è¼¯æŒ‰éˆ•æ¨£å¼ (ç¶ è‰²å¯¦å¿ƒ) */
        .btn-primary.text-white {
             background-color: var(--bs-primary); /* è–„è·ç¶ å¯¦å¿ƒ */
             border-color: var(--bs-primary);
             font-weight: 600;
             padding: 12px 25px;
             border-radius: 10px;
             transition: all 0.3s ease;
        }
        .btn-primary.text-white:hover {
            background-color: #00A38B; /* hover è®Šæ·± */
            border-color: #00A38B;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transform: scale(1.03); 
        }
        

        /* ğŸ“„ å…§å®¹å¡ç‰‡æ¨£å¼ (ä¿æŒ) */
        .passport-container {
            padding: 40px;
            border-radius: 15px; 
            background-color: #fff;
            box-shadow: 0 10px 30px rgba(0, 201, 167, 0.15); /* ä½¿ç”¨ç¶ è‰²èª¿é™°å½± */
        }
        /* å€å¡Šæ¨™é¡Œ */
        .section-title {
            color: var(--bs-primary); /* è–„è·ç¶  */
            border-left: 4px solid var(--bs-primary); 
            padding-left: 10px;
            margin-top: 35px;
            margin-bottom: 20px;
            font-weight: 700;
            font-size: 1.5rem;
        }
        /* é†«ç™‚æ¸…å–® */
        .medical-list .list-group-item {
            border-left: 3px solid #B9FBC0; /* ä½¿ç”¨æ·ºç¶ è‰²åˆ†éš”ç·š */
        }
        /* è³‡è¨Šæ¨™ç±¤ */
        .badge.bg-secondary { 
             background-color: var(--bs-secondary) !important; /* ç¿¡ç¿ ç¶  */
        }
        .badge.bg-success {
             background-color: var(--button-border-green) !important; /* ç¿¡ç¿ ç¶  */
        }
        .badge.bg-primary { /* çµç´®æ¨™ç±¤ï¼Œä½¿ç”¨æ ¸å¿ƒè–„è·ç¶  */
             background-color: var(--bs-primary) !important;
        }
        .badge.bg-info { /* å€‹æ€§æ¨™ç±¤ï¼Œä½¿ç”¨æ·ºè—/é’è‰² */
             background-color: #20C997 !important; 
        }
        .passport-image {
             width: 100%;
             max-height: 400px;
             object-fit: cover;
             border-radius: 10px;
             margin-bottom: 20px;
             box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .list-group-item .text-danger {
            color: #D63384 !important; /* ä½¿ç”¨ä¸€å€‹é¡¯çœ¼çš„ç²‰è‰²èª¿ä¾†å¼·èª¿å¥åº·å‚™è¨» */
        }
        /* é†«ç™‚æ–‡ä»¶é€£çµæ¨£å¼ */
        .medical-file-link {
            font-size: 0.9rem;
            margin-right: 10px;
            margin-bottom: 5px;
            display: inline-block;
        }

        /* ğŸ¦¶ é å°¾ */
        .bg-dark {
            background-color: var(--dark-footer) !important; /* æ·±æ¾ç¶ é å°¾ */
            color: #fff !important;
        }
    </style>
</head>
<body>

    <div class="container-fluid page-header">
        <div class="container text-center">
            
            <div class="creative-title-container">
                <div class="main-title-banner">
                    <i class="bi bi-journal-check me-2"></i>å¯µç‰©æ•¸ä½è­·ç…§
                </div>
            </div>
            
            <div class="sub-text-under-banner">ç´€éŒ„æ¯›å­©å¥åº·èˆ‡ç¤¾äº¤å±¥æ­·</div>
            
            <div class="button-group-under-title">
                <div class="d-flex justify-content-center align-items-center">
                    
                    {% if prev_id %}
                    <a href="{{ url_for('show_pet_passport', pet_id=prev_id) }}" class="btn btn-outline-primary btn-sm me-3">
                        <i class="bi bi-arrow-left me-2"></i>ä¸Šä¸€é 
                    </a>
                    {% else %}
                    <button class="btn btn-secondary btn-sm me-3" disabled>
                        <i class="bi bi-x-circle me-2"></i>å·²æ˜¯é–‹é ­
                    </button>
                    {% endif %}

                    <a href="{{ url_for('show_main_map') }}" class="btn btn-primary btn-sm text-white me-3">
                        <i class="bi bi-map me-2"></i>è¿”å›åœ°åœ–é¦–é 
                    </a>
                    
                    {% if next_id %}
                    <a href="{{ url_for('show_pet_passport', pet_id=next_id) }}" class="btn btn-outline-primary btn-sm">
                        ä¸‹ä¸€é  <i class="bi bi-arrow-right ms-2"></i>
                    </a>
                    {% else %}
                    <button class="btn btn-secondary btn-sm" disabled>
                        å·²æ˜¯çµå°¾ <i class="bi bi-check-circle me-2"></i>
                    </button>
                    {% endif %}
                </div>
            </div>

        </div>
    </div>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="passport-container">
                    
                    {% if pet %}
                    
                    <h1 class="text-center mb-4 display-4" style="color: var(--banner-sub-text-color);">
                        {{ pet.name }} çš„å°ˆå±¬è­·ç…§
                    </h1>
                    
                    <img src="{{ pet.image_url }}" alt="{{ pet.name }} çš„ç…§ç‰‡" class="passport-image">
                    
                    <h2 class="section-title"><i class="bi bi-person-badge me-2"></i>åŸºæœ¬èº«ä»½èˆ‡å®‰å…¨è³‡è¨Š</h2>
                    <p class="lead text-muted">ä»¥ä¸‹æ˜¯{{ pet.name }}çš„å°ˆå±¬æ•¸ä½èº«ä»½è­‰ã€‚</p>
                    
                    <div class="mb-4">
                        <span class="badge bg-secondary info-badge"><i class="bi bi-balloon me-1"></i>ç‰©ç¨®/å“ç¨®ï¼š{{ pet.species }}</span>
                        <span class="badge bg-secondary info-badge"><i class="bi bi-calendar me-1"></i>å¹´é½¡ï¼š{{ pet.age }} æ­²</span>
                        
                        <span class="badge bg-primary text-white info-badge"><i class="bi bi-gender-ambiguous me-1"></i>çµç´®ç‹€æ…‹ï¼šå¦ (é ç•™)</span>
                    </div>
                    
                    <blockquote class="blockquote small text-muted border-start border-primary border-3 ps-3">
                        <p class="mb-0">æ´»å‹•åœ°é»ï¼š{{ pet.location }}</p>
                    </blockquote>


                    <h2 class="section-title mt-5"><i class="bi bi-chat-square-text me-2"></i>å€‹æ€§èˆ‡ç¤¾äº¤å±¥æ­·</h2>
                    <p>ä»¥ä¸‹æ˜¯{{ pet.name }}çš„å€‹æ€§å’Œåå¥½ï¼š</p>
                    
                    <div class="card bg-light p-3 border-0">
                        <p class="mb-2"><strong>äº’å‹•å‚™è¨»ï¼š</strong> {{ pet.interactionNote or 'ç„¡ç‰¹åˆ¥å‚™è¨»' }}</p>
                        
                        <div class="mt-2">
                            {% for tag in pet.tags %}
                                <span class="badge bg-info info-badge mb-1">
                                    <i class="bi bi-tag-fill me-1"></i>{{ tag }}
                                </span>
                            {% endfor %}
                            {% if not pet.tags %}
                                <span class="text-muted">ç„¡å€‹æ€§æ¨™ç±¤ã€‚</span>
                            {% endif %}
                        </div>
                    </div>

                    
                    <h2 class="section-title mt-5"><i class="bi bi-hospital me-2"></i>å°ˆæ¥­é†«ç™‚ç´€éŒ„</h2>
                    <p>æ­¤è™•æä¾›{{ pet.name }}çš„å¥åº·ç‹€æ³å‚™è¨»èˆ‡å¯ä¸‹è¼‰/æŸ¥çœ‹çš„é†«ç™‚ç´€éŒ„ã€‚</p>
                    
                    <ul class="list-group medical-list list-group-flush mb-4">
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto w-100">
                                <div class="fw-bold text-danger"><i class="bi bi-patch-exclamation-fill me-1"></i>ç°¡è¦å¥åº·ç‹€æ³å‚™è¨»</div>
                                {{ pet.healthNote or 'ç„¡ç°¡è¦å¥åº·ç‹€æ³å‚™è¨»ã€‚' }}
                            </div>
                        </li>
                        
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto w-100">
                                <div class="fw-bold"><i class="bi bi-file-earmark-medical me-1"></i>ä¸Šå‚³æ–‡ä»¶ (å…± {{ pet.medicalRecords | length }} ç­†)</div>
                                {% if pet.medicalRecords %}
                                    {% for record in pet.medicalRecords %}
                                        <a href="{{ record.url }}" target="_blank" class="medical-file-link badge bg-success text-white">
                                            {% if '.pdf' in record.filename|lower %}
                                                <i class="bi bi-file-earmark-pdf"></i>
                                            {% else %}
                                                <i class="bi bi-file-earmark-text"></i>
                                            {% endif %}
                                            {{ record.filename }}
                                        </a>
                                    {% endfor %}
                                {% else %}
                                    <span class="text-muted small">ç„¡ç›¸é—œæ–‡ä»¶ä¸Šå‚³ã€‚</span>
                                {% endif %}
                            </div>
                        </li>
                    </ul>

                    {% else %}
                    <div class="alert alert-warning text-center">
                        <h4 class="alert-heading"><i class="bi bi-info-circle me-2"></i>ç›®å‰æ²’æœ‰å¯µç‰©è­·ç…§è³‡æ–™</h4>
                        <p>è«‹å…ˆå‰å¾€ <a href="{{ url_for('show_upload_form') }}" class="alert-link">ä¸Šå‚³æ¯›å­©é é¢</a> å»ºç«‹æ–°çš„æª”æ¡ˆï¼</p>
                        
                        {% if error_message %}
                        <p class="text-danger small mt-2">({{ error_message }})</p>
                        {% endif %}
                    </div>
                    {% endif %}

                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid py-3 mt-auto bg-dark">
        <div class="container text-center">
            <p class="mb-0 small">&copy; æ¯›å­©äº¤å‹å¤©åœ°. All Rights Reserved.</p>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>